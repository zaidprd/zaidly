---
// src/components/PostCard.astro (FLAT & PREMIUM DESIGN)
import type { CollectionEntry } from 'astro:content';
type CombinedPost = CollectionEntry<'blog'>; 

interface Props {
    post: CombinedPost;
    postType: string; 
}

const { post, postType } = Astro.props;

const imagePath = post.data.image; 

// Format Tanggal
const formattedDate = post.data.pubDate 
    ? post.data.pubDate.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })
    : 'Date not available';

// FIX SLUG
const cleanSlug = post.slug.replace('blog/', '');
const postUrl = `/${cleanSlug}`; 
---

<a href={postUrl} 
    class="group block bg-white border border-coffee-brown/10 hover:border-accent-primary transition-all duration-300">
    
    {/* Image Container: Hapus rounded, ganti ke Sharp Edge */}
    <div class="relative h-56 w-full bg-coffee-light overflow-hidden">
        {imagePath ? (
            <img 
                src={imagePath} 
                alt={post.data.title}
                class="w-full h-full object-cover grayscale-[30%] group-hover:grayscale-0 group-hover:scale-105 transition duration-700"
                loading="lazy"
            />
        ) : (
            <div class="w-full h-full flex items-center justify-center text-coffee-brown/30 font-bold uppercase tracking-widest text-xs">
                Image coming soon
            </div>
        )}
        
        {/* Badge Type: Pindah ke pojok kiri atas gambar agar lebih modern */}
        <div class="absolute top-4 left-4">
             <span class="bg-coffee-dark text-white text-[10px] font-black px-3 py-1 tracking-[0.2em] uppercase">
                {postType} 
            </span>
        </div>
    </div>

    <div class="p-6">
        <h3 class="text-xl font-black text-coffee-dark mb-3 leading-tight uppercase tracking-tight group-hover:text-accent-primary transition duration-300">
            {post.data.title}
        </h3>
        
        <p class="text-coffee-brown text-sm mb-6 line-clamp-2 leading-relaxed opacity-80">
            {post.data.description}
        </p>

        <div class="flex items-center justify-between pt-4 border-t border-coffee-brown/5">
            <span class="text-[10px] font-bold text-coffee-brown/50 uppercase tracking-widest">
                {formattedDate}
            </span>
            <span class="text-accent-primary font-black text-xs uppercase tracking-widest group-hover:translate-x-1 transition-transform">
                Read More â†’
            </span>
        </div>
    </div>
</a>
---
// src/components/guides/GuideHub.astro
import ContentSection from '../ContentSection.astro';

// Ambil semua gambar di folder images secara rekursif agar folder Brewing terbaca
const guideImages = import.meta.glob<{ default: ImageMetadata }>('../../assets/images/**/*.{jpeg,jpg,png,gif,webp}');

const ALL_GUIDE_BLOCKS = [
    {
        sectionId: "brewing-foundations",
        sectionTitle: "1. Coffee Brewing Foundations",
        sectionSubtitle: "Master the fundamental variables that dictate the quality of every cup you brew at home.",
        bodyContent: [
            {
                type: 'list',
                title: 'Core Brewing Variables:',
                listItems: [
                    "<strong>Water Quality:</strong> Why filtered water is non-negotiable for flavor and gear longevity.",
                    "<strong>Brew Ratios:</strong> Finding the 'Golden Ratio' for your specific taste preference.",
                    "<strong>Grind Size:</strong> Matching your grind to your brew method for ideal extraction.",
                ]
            },
            {
                type: 'grid',
                title: 'Foundational Guides:',
                guides: [
                    { title: "Coffee-to-Water Ratio", url: "/", imgKey: "../../assets/images/Brewing/Brewing3.webp" },
                    { title: "Water Temperature Masterclass", url: "/", imgKey: "../../assets/images/Brewing/Brewing2.webp" },
                    { title: "Understanding Extraction", url: "/", imgKey: "../../assets/images/Brewing/Brewing1.webp" },
                    { title: "Coffee Storage Hacks", url: "/", imgKey: "../../assets/images/Brewing/Brewing4.webp" },
                ]
            }
        ],
    },
    {
        sectionId: "pour-over-guides",
        sectionTitle: "2. The Art of Pour-Over",
        sectionSubtitle: "Precision brewing for those who appreciate clarity and complex acidity in their coffee.",
        bodyContent: [
            {
                type: 'grid',
                title: 'Manual Dripper Guides:',
                guides: [
                    { title: "Hario V60 Technique", url: "/", imgKey: "../../assets/images/v60.webp" },
                    { title: "Chemex Masterclass", url: "/", imgKey: "../../assets/images/chemex.webp" },
                    { title: "Kalita Wave Recipe", url: "/", imgKey: "../../assets/images/kalita.webp" },
                    { title: "Fellow Stagg [X] Guide", url: "/", imgKey: "../../assets/images/stagg.webp" },
                ]
            }
        ],
    },
    {
        sectionId: "immersion-brewing",
        sectionTitle: "3. Immersion & Full-Body Brewing",
        sectionSubtitle: "Simple, consistent, and bold. Perfect for those who love a heavy mouthfeel.",
        bodyContent: [
            {
                type: 'grid',
                title: 'Immersion Method Guides:',
                guides: [
                    { title: "The Ultimate AeroPress", url: "/", imgKey: "../../assets/images/Brewing/aeropress.webp" },
                    { title: "Perfect French Press", url: "/", imgKey: "../../assets/images/Brewing/frenchpress.webp" },
                    { title: "Clever Dripper Secrets", url: "/", imgKey: "../../assets/images/Brewing/clever.webp" },
                    { title: "Cold Brew at Home", url: "/", imgKey: "../../assets/images/Brewing/coldbrew.webp" },
                ]
            }
        ],
    },
    {
        sectionId: "espresso-at-home",
        sectionTitle: "4. Home Espresso Mastery",
        sectionSubtitle: "The hardest method to master, but the most rewarding. Learn to pull cafe-quality shots.",
        bodyContent: [
            {
                type: 'list',
                title: 'Espresso Essentials:',
                listItems: [
                    "<strong>Dialing In:</strong> Adjusting your grinder for the perfect 1:2 shot ratio.",
                    "<strong>Milk Texturing:</strong> Achieving silky micro-foam for latte art.",
                    "<strong>Puck Prep:</strong> The importance of distribution and tamping.",
                ]
            },
            {
                type: 'grid',
                title: 'Espresso Focus Guides:',
                guides: [
                    { title: "Dialing In Espresso", url: "/", imgKey: "../../assets/images/Bottomless.webp" },
                    { title: "Latte Art for Beginners", url: "/", imgKey: "../../assets/images/latte.webp" },
                    { title: "Moka Pot 'Espresso'", url: "/", imgKey: "../../assets/images/mokapot.webp" },
                    { title: "Espresso Maintenance", url: "/", imgKey: "../../assets/images/maintenance.webp" },
                ]
            }
        ],
    },
    {
        sectionId: "advanced-coffee-science",
        sectionTitle: "5. Advanced Coffee Science",
        sectionSubtitle: "Go beyond the basics and understand the chemistry behind the cup.",
        bodyContent: [
            {
                type: 'paragraph',
                text: "Understanding coffee on a molecular level helps you troubleshoot bad brews and unlock the full potential of expensive specialty beans."
            },
            {
                type: 'grid',
                title: 'Deep Dive Articles:',
                guides: [
                    { title: "Coffee Water Chemistry", url: "/", imgKey: "../../assets/images/glass.webp" },
                    { title: "Altitude & Flavor", url: "/", imgKey: "../../assets/images/altitude.webp" },
                    { title: "Processing Methods", url: "/", imgKey: "../../assets/images/processing.webp" },
                    { title: "Roast Profile Impact", url: "/", imgKey: "../../assets/images/roast.webp" },
                ]
            }
        ],
    },
];
---

{ALL_GUIDE_BLOCKS.map((data, index) => (
    <ContentSection 
        data={data} 
        isFirst={index === 0} 
        images={guideImages}
    />
))}
---
// src/components/gear/BonusGearTable.astro
import { Image } from 'astro:assets';

// 1. Ambil semua gambar produk & brand dari assets
// Pastikan gambar diletakkan di src/assets/images/products/
const productImages = import.meta.glob<{ default: ImageMetadata }>('../../assets/images/products/*.{jpeg,jpg,png,webp}');

interface GearItem {
    type: string;
    imgKey: string; // Menggunakan imgKey bukan image path statis
    product: string;
    details: string[];
    brandImgKey?: string;
    amazonUrl: string;
}

const gearPicks: GearItem[] = [
    {
        type: "BEST AUTOMATIC DRIP",
        imgKey: "../../assets/images/products/technivorm.jpg",
        product: "TECHNIVORM MOCCAMASTER KBGV SELECT",
        details: ["10 cups capacity", "Cone filter", "Glass carafe"],
        brandImgKey: "../../assets/images/products/coffee-roastery.png",
        amazonUrl: "#" 
    },
    {
        type: "BEST ESPRESSO MACHINE",
        imgKey: "../../assets/images/products/breville.jpg",
        product: "BREVILLE BES840XL INFUSER",
        details: ["Semi-automatic machine", "Manual steam wand", "61 ounces water tank"],
        brandImgKey: "../../assets/images/products/amazon-logo.png",
        amazonUrl: "#"
    },
    {
        type: "BEST POUR-OVER BREWER",
        imgKey: "../../assets/images/products/kalita.jpg",
        product: "KALITA WAVE",
        details: ["Stainless steel, ceramic, glass, copper", "2 or 4 cups capacity", "Kalita filters"],
        brandImgKey: "../../assets/images/products/amazon-logo.png",
        amazonUrl: "#"
    },
];
---

<section class="py-16 bg-cream-latte">
    <div class="container mx-auto max-w-6xl px-4">
        <h2 class="text-3xl font-black text-coffee-dark mb-10 text-center uppercase tracking-wider">
            A Bonus List Of 15 Best Coffee Gear Picks
        </h2>

        <div class="bg-white border border-coffee-brown/10 overflow-hidden shadow-xl">
            {gearPicks.map((item) => (
                <div class="flex flex-col md:flex-row items-center border-b border-coffee-brown/10 last:border-b-0 p-6 sm:p-8 hover:bg-coffee-light/20 transition-colors">
                    
                    {/* Kolom 1: Image & Badge */}
                    <div class="flex-shrink-0 w-full md:w-1/4 text-center mb-6 md:mb-0">
                        <span class="inline-block bg-coffee-dark text-white text-[10px] font-bold px-3 py-1 rounded-full mb-4 tracking-widest uppercase">
                            {item.type}
                        </span>
                        <div class="h-40 flex items-center justify-center overflow-hidden">
                            {productImages[item.imgKey] ? (
                                <Image 
                                    src={productImages[item.imgKey]()} 
                                    alt={item.product}
                                    width={200}
                                    height={160}
                                    class="h-full w-auto object-contain mx-auto transition-transform hover:scale-105 duration-300"
                                />
                            ) : (
                                <div class="text-gray-400 text-[10px]">Product Image Missing</div>
                            )}
                        </div>
                    </div>

                    {/* Kolom 2: Product Name & Details */}
                    <div class="flex-grow w-full md:w-1/2 px-0 md:px-10 mb-6 md:mb-0">
                        <h3 class="text-2xl font-black text-coffee-dark mb-4 leading-tight uppercase tracking-tighter italic">{item.product}</h3>
                        <ul class="space-y-2">
                            {item.details.map(detail => (
                                <li class="flex items-start text-sm text-gray-600">
                                    <svg class="w-5 h-5 text-accent-primary mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    {detail}
                                </li>
                            ))}
                        </ul>
                    </div>

                    {/* Kolom 3: Brand & CTA */}
                    <div class="flex-shrink-0 w-full md:w-1/4 text-center flex flex-col items-center justify-center border-t md:border-t-0 md:border-l border-gray-100 pt-6 md:pt-0">
                        {item.brandImgKey && productImages[item.brandImgKey] && (
                            <Image 
                                src={productImages[item.brandImgKey]()} 
                                alt="Brand Logo"
                                width={100}
                                height={40}
                                class="h-8 w-auto object-contain mb-6 opacity-60 grayscale hover:grayscale-0 transition-all"
                            />
                        )}
                        <a 
                            href={item.amazonUrl} 
                            target="_blank" 
                            rel="noopener noreferrer"
                            class="w-full md:w-auto bg-coffee-dark hover:bg-accent-primary text-white text-xs font-bold py-4 px-10 tracking-[0.2em] transition duration-300"
                        >
                            CHECK PRICE
                        </a>
                    </div>
                </div>
            ))}
        </div>
    </div>
</section>
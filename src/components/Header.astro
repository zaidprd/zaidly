---
// Header.astro
---
<header 
    id="main-header" 
    class="fixed w-full top-0 z-50 bg-coffee-light h-20 transition-all duration-500 border-none shadow-none"
>
    <div class="container mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 flex justify-between items-center h-full">
        
        <a href="/" class="flex items-center gap-3 md:gap-4 group">
            <img 
                src="/logo.webp" 
                alt="Zaidly Icon" 
                width="80"
                height="80"
                loading="eager"
                id="header-logo"
                class="h-12 md:h-14 w-auto object-contain transition-all duration-500 group-hover:scale-105"
            />
            <span 
                id="header-text"
                class="text-xl md:text-2xl font-bold tracking-[0.2em] uppercase text-coffee-dark transition-all duration-500"
                style="font-family: system-ui, -apple-system, sans-serif;"
            >
                Zaidly
            </span>
        </a>

        <nav class="hidden md:block">
            <ul class="flex space-x-8 text-sm font-bold tracking-widest uppercase">
                <li><a href="/" class="nav-link text-coffee-dark hover:text-accent-primary transition-colors duration-300">Home</a></li>
                <li><a href="/guides" class="nav-link text-coffee-dark hover:text-accent-primary transition-colors duration-300">Guides</a></li>
                <li><a href="/gear" class="nav-link text-coffee-dark hover:text-accent-primary transition-colors duration-300">Gear</a></li>
                <li><a href="/beans" class="nav-link text-coffee-dark hover:text-accent-primary transition-colors duration-300">Beans</a></li>
                <li><a href="/blog" class="nav-link text-coffee-dark hover:text-accent-primary transition-colors duration-300">Blog</a></li>
            </ul>
        </nav>

        <button id="mobile-menu-button" class="md:hidden text-coffee-dark p-2 focus:outline-none transition-colors duration-500">
            <svg id="hamburger-icon" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
            <svg id="close-icon" class="h-8 w-8 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
        </button>
    </div>

    <div id="mobile-menu" class="hidden md:hidden bg-coffee-light border-t border-coffee-brown/10 shadow-2xl overflow-hidden transition-all duration-300">
        <ul class="px-6 py-8 space-y-2">
            <li><a href="/guides" class="mobile-link block py-3 px-4 text-xl font-black text-coffee-dark hover:bg-coffee-dark hover:text-white rounded-lg transition-all">Brewing Guides</a></li>
            <li><a href="/gear" class="mobile-link block py-3 px-4 text-xl font-black text-coffee-dark hover:bg-coffee-dark hover:text-white rounded-lg transition-all">Gear</a></li>
            <li><a href="/beans" class="mobile-link block py-3 px-4 text-xl font-black text-coffee-dark hover:bg-coffee-dark hover:text-white rounded-lg transition-all">Beans</a></li>
            <li><a href="/blog" class="mobile-link block py-3 px-4 text-xl font-black text-coffee-dark hover:bg-coffee-dark hover:text-white rounded-lg transition-all">Blog</a></li>
        </ul>
    </div>
</header>

<script>
    const initHeader = () => {
        const header = document.getElementById('main-header');
        const headerText = document.getElementById('header-text');
        const headerLogo = document.getElementById('header-logo');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const hamburgerIcon = document.getElementById('hamburger-icon');
        const closeIcon = document.getElementById('close-icon');
        const navLinks = document.querySelectorAll('.nav-link');

        if (!header || !mobileMenuButton) return;

        mobileMenuButton.onclick = () => {
            const isHidden = mobileMenu.classList.toggle('hidden');
            hamburgerIcon.classList.toggle('hidden', !isHidden);
            closeIcon.classList.toggle('hidden', isHidden);
        };

        const updateHeader = () => {
            const isScrolled = window.scrollY > 50;

            if (isScrolled) {
                header.classList.replace('h-20', 'h-16');
                header.classList.replace('bg-coffee-light', 'bg-coffee-dark');
                
                if(headerLogo) headerLogo.classList.replace('h-12', 'h-10');
                headerText.classList.replace('text-coffee-dark', 'text-white');
                headerText.classList.replace('text-xl', 'text-lg');

                mobileMenuButton.classList.replace('text-coffee-dark', 'text-white');
                navLinks.forEach(link => {
                    link.classList.add('text-white');
                    link.classList.remove('text-coffee-dark');
                });
            } else {
                header.classList.replace('h-16', 'h-20');
                header.classList.replace('bg-coffee-dark', 'bg-coffee-light');
                
                if(headerLogo) headerLogo.classList.replace('h-10', 'h-12');
                headerText.classList.replace('text-white', 'text-coffee-dark');
                headerText.classList.replace('text-lg', 'text-xl');

                mobileMenuButton.classList.replace('text-white', 'text-coffee-dark');
                navLinks.forEach(link => {
                    link.classList.remove('text-white');
                    link.classList.add('text-coffee-dark');
                });
            }
        };

        window.addEventListener('scroll', updateHeader);
        updateHeader();
    };

    document.addEventListener('astro:page-load', initHeader);
</script>

<style>
    #main-header { border-bottom: none !important; box-shadow: none !important; }
</style>